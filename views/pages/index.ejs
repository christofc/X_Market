<!DOCTYPE html>
<html>
<head>
	<title> X-Market </title>

	<!-- Including CSS  -->
	<link href="css/index.css" rel="stylesheet" type="text/css">
	<!-- Including google font Josefin Sans -->
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans|Josefin+Slab" rel="stylesheet">
	<!-- Including bootstrap v3.3.7 -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<!-- Including jquery v3.2.1 -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Including socket.io file v2.0.3 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>

	<script src="https://cdn.zinggrid.com/zinggrid.min.js"></script>
  	<script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <script>ZC.LICENSE = ['09c5964a057c3124ffaa293847e9aef4','d41d8cd98f00b204e9800998ecf8427e', 'faa38520146223e92b6b0d2fc89c0dc6'];</script>


	<!-- Custom CSS to make it look presentable -->
    <style>
		.font{
			font-family: 'Josefin Slab', serif;
			text-align:center;
			font-size: 40px;
			font-weight:bold;
		}
		textarea {
			font-family: 'Josefin Slab', serif;
			width: 100%;
			min-height: 50px;
			font-size: 20px;
			padding: 12px 20px;
			margin: 8px 0;
			border: 2px solid #4db8ff;

		}

		input[type=button]{
			font-family: 'Josefin Slab', serif;
			width: 100%;
			background-color: #4db8ff;
			border: none;
			color: white;
			font-size: 30px;
			padding: 16px 32px;
			text-decoration: none;
			margin: 4px 2px;
			cursor: pointer;
			border-radius: 15px;
		}
		input:hover{
			 background-color: #008ae6;
		}


		.component--container {
		  display: flex;
		}

		zing-grid {
		  --zg-pager-font-size:20px;
		  font-size: 20px;
		  --zg-head-cell-font-size: 30px;
		  --theme-font-family: 'Josefin Slab', serif;
		}

		.zc-license {
		  display:none;
		}


	</style>
</head>
<body>
	<div class="container">
		<div class="col-md-12">
			<!-- <canvas id="myChart" width="400" height="200"></canvas> -->
		</div>
	</div>
	<div class="container">
		<div class="col-md-12">
			<div>
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
		</div>
	</div>

<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-light bg-light p-4 mb-4">
  <a class="navbar-brand header-set" href="#">X-Market</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse header-set" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="#">Contact</a>
      </li>
			<li class="nav-item active">
        <a class="nav-link" href="#">About</a>
      </li>
    </ul>
  </div>
</nav>




<!-- Footer -->
<footer class="page-footer font-small indigo footer-set">

  <!-- Footer Links -->
  <div class="container">

    <!-- Grid row-->
    <div class="row d-flex justify-content-center pt-2 mb-2 footer-text">

      <!-- Grid column -->
      <div class="col-md-2 mb-3">
        <h6 class="text-uppercase font-weight-bold nik">
          <a class="footer-set" href="#!">Home</a>
        </h6>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-2 mb-3">
        <h6 class="text-uppercase font-weight-bold">
          <a class="footer-set" href="#!">Contact</a>
        </h6>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-2 mb-3">
        <h6 class="text-uppercase font-weight-bold">
          <a class="footer-set" href="#!">About</a>
        </h6>
      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row-->
    <hr class="rgba-white-light" style="margin: 0 15%;">

    <!-- Grid row-->
    <div class="row d-flex text-center justify-content-center mb-md-0 mb-4">

      <!-- Grid column -->
      <div class="col-md-8 col-12 mt-5">
        <p style="line-height: 1rem">COINS COINS COINS COINS COINS COINS COINS </p>
      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row-->
    <hr class="clearfix d-md-none rgba-white-light" style="margin: 0% 15%;">

    <!-- Grid row-->
    <div class="row pb-3">

      <!-- Grid column -->
      <div class="col-md-12">

        <div class="mb-2 flex-center">

          <!-- Facebook -->
          <a class="fb-ic">
            <i class="fab fa-facebook-f fa-lg white-text mr-4"> </i>
          </a>
          <!-- Twitter -->
          <a class="tw-ic">
            <i class="fab fa-twitter fa-lg white-text mr-4"> </i>
          </a>
          <!-- Google +-->
          <a class="gplus-ic">
            <i class="fab fa-google-plus-g fa-lg white-text mr-4"> </i>
          </a>
          <!--Linkedin -->
          <a class="li-ic">
            <i class="fab fa-linkedin-in fa-lg white-text mr-4"> </i>
          </a>
          <!--Instagram-->
          <a class="ins-ic">
            <i class="fab fa-instagram fa-lg white-text mr-4"> </i>
          </a>
          <!--Pinterest-->
          <a class="pin-ic">
            <i class="fab fa-pinterest fa-lg white-text"> </i>
          </a>

        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row-->

  </div>
  <!-- Footer Links -->

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">Â© 2018 Copyright: STR(NTZI)
  </div>
  <!-- Copyright -->

</footer>
<!-- Footer -->


<!-- Table zing grid
	<div class="container">
		<div class="col-md-12">
			<div class="component--container">
		      <zing-grid
			  	theme="ios"
				height="500"
				pager
				page-size="20"
				page-size-options="10,20,50"
			    layout="row"
			    layout-controls="disabled"
			    viewport-stop
				sort
				search>

		        <zg-colgroup>
					<zg-column index="high" header="Buy from" width="15%"></zg-column>
					<zg-column index="low" header="Sell to" width="15%"></zg-column>
					<zg-column index="pair" header="Pair" width="15%"></zg-column>
					<zg-column index="difference" header="Difference" width="15%"></zg-column>

		          <zg-column index="plot" header="Last 7 days" sort=false renderer="_renderLineChart">
		            <div class="line-chart--spark"></div>
		  			</zg-column>
		        </zg-colgroup>
		      </zing-grid>
		      <div id="myChart"></div>
		    </div>
		</div>
	</div>

-->
	<script>



	const ZingChartConfig = function(type, series) {
	  return {
	    type,
	    theme: 'spark',
	    tooltip: {
	      visible: type != 'pie' ? false : true,
	    },
	    crosshairX:{

	    },
	    series,
	  };
	};

	function _renderLineChart(ctv, cellRef, $cell) {
	  let zcRef = cellRef.querySelector('.line-chart--spark');
	  let id = `line-chart-${Math.floor(Math.random() * 99999)}`;
	  zcRef.setAttribute('id', id);
	  let mapValues = ctv.map(function(trend) {
	    return trend.Close;
	  });
	  // render line chart
	  zingchart.render({
	    id,
	    data: ZingChartConfig(
	      'line',
	      [{
	        values:mapValues
	      }]
	    ),
	    height: 100,
	    width: 150,
	  });
	}


	window.addEventListener('load', () => {
		const ADDRESS = "<%= address %>";
		var socket = io.connect(ADDRESS);

		socket.on('data_propagation' , function(input){
			let zgRef = document.querySelector('zing-grid');
			const data = input.data
			console.log(input)

			for (i in data) {
				data[i].plot =
				[
			      {
			        "Date": "3/4/2017",
			        "Close": 138.96
			      },
			      {
			        "Date": "10/2/2016",
			        "Close": 113
			      },
			      {
			        "Date": "5/2/2016",
			        "Close": 93.42
			      },
			      {
			        "Date": "12/5/2015",
			        "Close": 113.18
			      },
			      {
			        "Date": "7/1/2015",
			        "Close": 132.07
			      }
			    ]
			}

			zgRef.setData(data);

		})
	});







	</script>

</body>
</html>
