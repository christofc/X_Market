<!DOCTYPE html>
<html>
<head>
	<title> Crypto MVP </title>

	<!-- Including google font Josefin Sans -->
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans|Josefin+Slab" rel="stylesheet">
	<!-- Including bootstrap v3.3.7 -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- Including jquery v3.2.1 -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Including socket.io file v2.0.3 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

	<!-- Custom CSS to make it look presentable -->
    <style>
		.font{
			font-family: 'Josefin Slab', serif;
			text-align:center;
			font-size: 40px;
			font-weight:bold;
		}
		textarea {
			font-family: 'Josefin Slab', serif;
			width: 100%;
			min-height: 50px;
			font-size: 20px;
			padding: 12px 20px;
			margin: 8px 0;
			border: 2px solid #4db8ff;

		}

		input[type=button]{
			font-family: 'Josefin Slab', serif;
			width: 100%;
			background-color: #4db8ff;
			border: none;
			color: white;
			font-size: 30px;
			padding: 16px 32px;
			text-decoration: none;
			margin: 4px 2px;
			cursor: pointer;
			border-radius: 15px;
		}
		input:hover{
			 background-color: #008ae6;
		}
		input:focus,
		textarea:focus,
		button:focus {
			outline: none;
		}

	</style>
</head>
<body>

	<div class="container">
		<div class="col-md-12">
			<div>
				<table class="table" id="my_table">
					<tr>
						<td><h1 class="font">Platform</h1></td>
						<td><h1 class="font">Pair</h1></td>
						<td><h1 class="font">Difference</h1></td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<script>

	//Jquery code starts
	$('document').ready(function(){
		var PORT = "<%= port %>";
		const domain = 'http://localhost:'+PORT;
		//Connecting the socket to host and port
		var socket = io.connect(domain);
			socket.on('welcome', function (data) {
			});
		socket.on('binance_data' , function(input){
	  	  console.log('data = ' + input.data);
		  $('#high_platform').val(input.data[0].platform_name);
		  // $('#hight_pair_name').val(input.data.symbol);
		  $('#high_price').val(input.data[0].price);
		  // $('#low_platform_name_1').val('Binance');
		  // $('#low_price_1').val(input.data.price);


		  // Fetch data on button click.
		  // $('#aquote').click(function(){
			//   // data = $('#qcontent').val()
			//   // console.log(data);
			//   console.log('Button clicked');
			//   socket.emit('get_data');
			//   socket.on('server_data' , function(input){
			// 	  console.log('data = ' + input.data);
			// 	  $('#qcontent').val(input.data);
			//   })


			  //
			  // // data = 'empty';
			  // //Emitting the event and passing the quote to the server
			  // socket.on('pull_data', function () {
			  // 	socket.emit('server_data' , { quote: data })
			  // 	console.log(data);
			  // 	$('#qcontent').val(data)
				// })

			  // $('#qcontent').val('nikos');
		  })
		  socket.on('data_ascending' , function(input){
			  // console.log('data = ' + input.data);
			  $('#low_platform_0').val(input.data[0].platform_name);
			  $('#low_price_0').val(input.data[0].price);

			  $('#my_table tbody').html(
				  '<tr><td><h1 class="font">' + 'Platform' +
				  '</h1></td><td><h1 class="font">' + 'Pair' +
				  '</h1></td><td><h1 class="font">' + 'Difference' +
				  '</h1></td></tr>');


			  for (var i=0; i<input.data.length; i++){
			    $('#my_table').append(
					'<tr class="text-center"><td>' + input.data[i].high + '	--> ' + input.data[i].low +
					'</td><td>' + input.data[i].pair +
					'</td><td>' + input.data[i].difference + ' %' +
					'</td></tr>');
			  }
		  })
		})
		//jquery code ends
	</script>

</body>
</html>
